\ProvidesPackage{note-zh}[2024/02/17 Custom style for Chinese documents]
%% ============================================
%% Package options
%% ============================================
\newif\if@showtoc
\@showtoctrue % Default is to show TOC
\DeclareOption{notoc}{\@showtocfalse}
\DeclareOption{showtoc}{\@showtoctrue}
\ProcessOptions\relax

%% ============================================
%% Document structure and layout packages
%% ============================================
\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{titling}
\RequirePackage{titlesec}
\RequirePackage{enumitem}

%% ============================================
%% Math and graphics support
%% ============================================
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{graphicx}
\RequirePackage{tikz}

%% ============================================
%% Table and figure enhancements
%% ============================================
\RequirePackage{booktabs}
\RequirePackage{subcaption}
\RequirePackage{multirow}

%% ============================================
%% Text structure and content organization
%% ============================================
\RequirePackage{multicol}
\RequirePackage{listings}
\RequirePackage{tocloft} % Add tocloft for TOC customization

%% ============================================
%% Hyperlink and PDF properties
%% ============================================
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  filecolor=blue,
  urlcolor=blue,
  citecolor=blue
}

%% ============================================
%% Chinese language support
%% ============================================
\RequirePackage{ctex}
% Choose Chinese fonts, if want to change the english font, please use \setmainfont
% \setCJKmainfont{Songti SC} % Main Chinese font (Songti)
% \setCJKsansfont{Lantinghei TC} % Sans-serif Chinese font (Heiti)
% \setCJKmonofont{Maple Mono NF CN} % Monospaced Chinese font (Fangsong)

%% ============================================
%% Section formatting
%% ============================================
\titleformat{\section}
{\normalfont\Large\bfseries}{\thesection}{1em}{}

%% ============================================
%% Page geometry and layout
%% ============================================
\geometry{margin=1in, paperheight=11in, paperwidth=8.5in} % Standard letter size with normal margins

%% ============================================
%% Title formatting
%% ============================================
\renewcommand{\maketitle}{
  \pagenumbering{roman} % Start with Roman numerals for front matter
  \begin{center}
    \LARGE\bfseries\thetitle\\[0.5em]
    \large\today
  \end{center}
  \vspace{1em}
  \if@showtoc
    \tableofcontents
    \newpage
  \fi
  \pagenumbering{arabic} % Switch to Arabic numerals for main content
  \setcounter{page}{1} % Reset page counter to 1
  \setcounter{section}{-1} % Start section numbering from 0
}

%% ============================================
%% Table of Contents customization
%% ============================================
\renewcommand{\contentsname}{目录} % Set the TOC name to "目录" (Chinese for "Contents")
\renewcommand{\cfttoctitlefont}{\LARGE\bfseries} % Left align TOC title with proper spacing
\renewcommand{\cftaftertoctitle}{\hspace*{\fill}\vspace{0.5em}\hrule\vspace{1em}} % Center line after TOC title
\setlength{\cftbeforetoctitleskip}{1em} % Space before TOC title
\setlength{\cftaftertoctitleskip}{1em} % Space after TOC title

\renewcommand{\cftsecfont}{\bfseries} % Bold section titles
\renewcommand{\cftsecpagefont}{\bfseries} % Bold page numbers for sections
\setlength{\cftbeforesecskip}{0.5em} % Space between section entries
\setlength{\cftparskip}{0.2em} % Paragraph spacing in TOC

%% ============================================
%% Header and footer configuration
%% ============================================
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\renewcommand{\headrulewidth}{0pt} % Remove header rule
\fancyfoot[L]{\footnotesize \copyright\ \the\year\ \theauthor} % Copyright notice with author name in footer
\fancyfoot[R]{\thepage} % Page number on right side
\fancypagestyle{plain}{% Also apply to the first page
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[L]{\footnotesize \copyright\ \the\year\ \theauthor}
  \fancyfoot[R]{\thepage}
}