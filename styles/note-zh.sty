\ProvidesPackage{note-zh}[2024/02/17 Custom style for Chinese documents]

%% ============================================
%% Document structure and layout packages
%% ============================================
\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{titling}
\RequirePackage{titlesec}
\RequirePackage{enumitem}

%% ============================================
%% Math and graphics support
%% ============================================
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{graphicx}
\RequirePackage{tikz}

%% ============================================
%% Table and figure enhancements
%% ============================================
\RequirePackage{booktabs}
\RequirePackage{subcaption}
\RequirePackage{multirow}

%% ============================================
%% Text structure and content organization
%% ============================================
\RequirePackage{multicol}
\RequirePackage{listings}
\RequirePackage{tocloft} % Add tocloft for TOC customization

%% ============================================
%% Hyperlink and PDF properties
%% ============================================
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  filecolor=blue,
  urlcolor=blue,
  citecolor=blue
}

%% ============================================
%% Chinese language support
%% ============================================
\RequirePackage{ctex}
% Choose Chinese fonts, if want to change the english font, please use \setmainfont
\setCJKmainfont{Songti SC} % Main Chinese font (Songti)
\setCJKsansfont{Lantinghei TC} % Sans-serif Chinese font (Heiti)
% \setCJKmonofont{Maple Mono NF CN} % Monospaced Chinese font (Fangsong)

%% ============================================
%% Section formatting
%% ============================================
\titleformat{\section}
{\normalfont\Large\bfseries}{\thesection}{1em}{}

%% ============================================
%% Page geometry and layout
%% ============================================
\geometry{margin=1in, paperheight=11in, paperwidth=8.5in} % Standard letter size with normal margins

%% ============================================
%% Title formatting
%% ============================================
\renewcommand{\maketitle}{
  \pagenumbering{roman} % Start with Roman numerals for front matter
  \begin{center}
    \LARGE\bfseries\thetitle\\[0.5em]
    \large\today
  \end{center}
  \vspace{1em}
  \tableofcontents
  \newpage
  \pagenumbering{arabic} % Switch to Arabic numerals for main content
  \setcounter{page}{1} % Reset page counter to 1
}

%% ============================================
%% Table of Contents customization
%% ============================================
\renewcommand{\contentsname}{Content} % Set the TOC name to "目录" (Chinese for "Contents")
\renewcommand{\cfttoctitlefont}{\LARGE\bfseries\sffamily} % Left align TOC title with proper spacing
\renewcommand{\cftaftertoctitle}{\hspace*{\fill}\vspace{0.5em}\hrule\vspace{1em}} % Center line after TOC title
\setlength{\cftbeforetoctitleskip}{1em} % Space before TOC title
\setlength{\cftaftertoctitleskip}{1em} % Space after TOC title

\renewcommand{\cftsecfont}{\bfseries} % Bold section titles
\renewcommand{\cftsecpagefont}{\bfseries} % Bold page numbers for sections
\setlength{\cftbeforesecskip}{0.5em} % Space between section entries
\setlength{\cftparskip}{0.2em} % Paragraph spacing in TOC

%% ============================================
%% Header and footer configuration
%% ============================================
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\renewcommand{\headrulewidth}{0pt} % Remove header rule
\fancyfoot[L]{\footnotesize \copyright\ \the\year\ \theauthor} % Copyright notice with author name in footer
\fancyfoot[R]{\thepage} % Page number on right side
\fancypagestyle{plain}{% Also apply to the first page
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[L]{\footnotesize \copyright\ \the\year\ \theauthor}
  \fancyfoot[R]{\thepage}
}

%% ============================================
%% Integrated Math Macros (from math-macros.tex)
%% ============================================
% Common math operators
\DeclareMathOperator{\arctg}{arctg}
\DeclareMathOperator{\arcctg}{arcctg}
\DeclareMathOperator{\dif}{d} % Differential operator
\DeclareMathOperator{\Tr}{Tr} % Trace operator
\DeclareMathOperator{\diag}{diag} % Diagonal operator
\DeclareMathOperator{\rank}{rank} % Rank operator

% Shorthand commands
\newcommand{\R}{\mathbb{R}}         % Real numbers
\newcommand{\Z}{\mathbb{Z}}         % Integers
\newcommand{\N}{\mathbb{N}}         % Natural numbers
\newcommand{\C}{\mathbb{C}}         % Complex numbers
\newcommand{\Q}{\mathbb{Q}}         % Rational numbers

% Vector notation
\newcommand{\vecr}[1]{\vec{#1}}    % Vector
\newcommand{\mtrx}[1]{\mathbf{#1}} % Matrix
\newcommand{\vect}[1]{\boldsymbol{#1}} % Vector notation
\newcommand{\mat}[1]{\mathbf{#1}} % Matrix notation
\newcommand{\transp}[1]{{#1}^{\top}} % Transpose notation

% Probability and statistics
\newcommand{\E}{\mathbb{E}}         % Expected value
\newcommand{\Var}{\mathrm{Var}}     % Variance
\newcommand{\Cov}{\mathrm{Cov}}     % Covariance

% Calculus shortcuts
\newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}} % Partial derivative
\newcommand{\pdd}[2]{\frac{\partial^2 #1}{\partial #2^2}} % Second partial derivative
\newcommand{\dd}[2]{\frac{d #1}{d #2}} % Total derivative

%% ============================================
%% Integrated Formatting Macros (from formatting-macros.tex)
%% ============================================
% Text highlighting and emphasis
\newcommand{\todo}[1]{\textcolor{red}{[TODO: #1]}}
\newcommand{\highlight}[1]{\colorbox{yellow}{#1}}

% Specialized text formatting
\newcommand{\term}[1]{\textit{#1}}
\newcommand{\foreign}[1]{\textit{#1}}
\newcommand{\acronym}[1]{\textsc{#1}}

% Quotation helpers
\newcommand{\enquote}[1]{``#1''}
\newcommand{\blockquoter}[2]{%
  \begin{quote}
    #1
    \par\raggedleft--- #2
  \end{quote}
}

% Chinese-specific formatting
\providecommand{\mynote}[1]{\textbf{注：}#1} % Use \mynote instead of \note to avoid conflicts
